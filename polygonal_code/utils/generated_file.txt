#
analysis 3d.full dynamics
#
default.parameters
mass.damping.parameter = 19.1853
stiffness.damping.parameter = 0.0018
#
materials
 mat.name    model       properties
#  {{{1
                  # En,   ft,   fc,   Gf1,   Gf3,  mu
     math     mcri  1900   0.04    6.2  0.01    20    0.2 &
                   # Es,   co,   tanf,   Gf2
                     16090    0.23    0.58    0.1
#
                   # En,   ft,   fc,   Gf1,   Gf3,  mu
     matv     mcri  1140   0.7    3.1   0.1    20   0.2 &
                   # Es,   co,   tanf,   Gf2
                     166900    1.5    0.8    0.1
#
                   # Ed,   co_d,   tanf_d,  Uult(mm) 
     matd     mcrd   580   0.17   0.42    10.5  &
                   # Eem, py, pr, miou, miour, Epm
                     4570  28560.8  5710.36  0.0  0.0  -264.4437 &
                    #TOM spring - IP
                    #kpl1 Fy   ftu  cF alpha beta flag_strength Fult(%)     w
                     0.1 0.8  0.3 0.4  0.8  0.01       1        1        0 &
                    #TOM spring - OOP
                    #Uult(*ufmax) cF_OOP alpha_OOP beta_OOP
                        10        0.4     0.8      0.01 
#
#rigid base
                  # En,   ft,   fc,   Gf1,   Gf3,  mu
     math_r     mcri  5e5  100    1000  10    200    0.2 &
                   # Es,   co,   tanf,   Gf2
                     5e5    10 1 10   
#
                   # En,   ft,   fc,   Gf1,   Gf3,  mu
     matv_r     mcri 5e5  100    1000  10    200 0.2 &
                   # Es,   co,   tanf,   Gf2
                     5e5    10 1 10 
#
                   # Ed,   co_d,   tanf_d,  Uult(mm)
     matd_r    mcrd   5e8   100   1    1000   &
                   # Eem, py, pr, miou, miour, Epm
                     4570  28560.8  5710.36  0.0  0.0  -264.4437 &
                    #TOM spring - IP
                    #kpl1 Fy   ftu  cF alpha beta flag_strength Fult(%)     w
                     0.1 0.8  0.3 0.4  0.8  0.01       1        1        0 &
                    #TOM spring - OOP
                    #Uult(*ufmax) cF_OOP alpha_OOP beta_OOP
                        10        0.4     0.8      0.01 

#  }}}1
#
groups
# {{{1
#
type = mcr4
  grp.name    mat.names    thickness gauss.points edge.flags density ratio.of.mass mass.damping
    macro1  math  matv math  matv matd   250    9  3  9  3   1 1 1 1   1.9e-9    0.5    0
    macro2  math_r  matv_r math_r  matv_r matd   250    9  3  9  3   1 1 1 1   1.9e-9    0.5    0
#
type = cpl2
grp.name  stiffness.parameters
cpy        rigid rigid 0 0 0 0

type = sprd
grp.name       direction    spread.nodes   ratios.of.spread
 g_forc_x x 4 1.0 &
 1.0 1.0 1.0  

type = cnm3
grp.name      mass
m1         2.548
m2         5.096

#
#  }}}1
#
 structural.nodal
 nod.name           x            y            z
#   {{{1
10001     10.3786     5e-05       2.42075     
10002     10.3786     5e-05       4.53685     
10003     10.3786     5e-05       4.53685     
10004     10.3786     5e-05       4.53685     
10005     10.3786     5e-05       7.19655     
10006     10.3786     5e-05       9.31265     
10007     10.3786     5e-05       9.31265     
10008     10.3786     5e-05       9.31265     
10009     10.3786     5e-05       11.89695    
100010    10.3786     5e-05       13.99925    
100011    10.3786     5e-05       13.99925    
100012    10.3786     5e-05       13.99925    
200013    10.3786     2.81515     2.42075     
200014    10.3786     2.81515     2.42075     
200015    10.3786     2.81515     2.42075     
200016    10.3786     2.81515     4.53685     
200017    10.3786     2.81515     7.19655     
200018    10.3786     2.81515     7.19655     
200019    10.3786     2.81515     7.19655     
200020    10.3786     2.81515     9.31265     
200021    10.3786     2.81515     11.89695    
200022    10.3786     2.81515     11.89695    
200023    10.3786     2.81515     11.89695    
200024    10.3786     2.81515     13.99925    
300025    10.3786     4.3282      7.19655     
300026    10.3786     4.3282      9.31265     
300027    10.3786     4.3282      9.31265     
300028    10.3786     4.3282      9.31265     
300029    10.3786     4.3282      11.89695    
300030    10.3786     4.3282      13.99925    
300031    10.3786     4.3282      13.99925    
300032    10.3786     4.3282      13.99925    
400033    10.3786     4.32825     2.42075     
400034    10.3786     4.32825     4.53685     
400035    10.3786     4.32825     4.53685     
400036    10.3786     4.32825     4.53685     
500037    10.3786     5.4788      11.89695    
500038    10.3786     5.4788      11.89695    
500039    10.3786     5.4788      11.89695    
500040    10.3786     5.4788      13.99925    
600041    10.3786     5.6226      7.19655     
600042    10.3786     5.6226      7.19655     
600043    10.3786     5.6226      7.19655     
600044    10.3786     5.6226      9.31265     
700045    10.3786     5.76875     2.42075     
700046    10.3786     5.76875     2.42075     
700047    10.3786     5.76875     2.42075     
700048    10.3786     5.76875     4.53685     
101049    10.3786     2.81505     5e-05       
101050    10.3786     2.81505     2.42075     
101051    10.3786     2.81505     2.42075     
101052    10.3786     2.81505     2.42075     
101053    10.3786     2.81505     4.5368      
101054    10.3786     2.81505     7.1966      
101055    10.3786     2.81505     7.1966      
101056    10.3786     2.81505     7.1966      
101057    10.3786     2.81505     9.3127      
101058    10.3786     2.81505     11.8969     
101059    10.3786     2.81505     11.8969     
101060    10.3786     2.81505     11.8969     
201061    10.3786     4.32815     5e-05       
201062    10.3786     4.32815     5e-05       
201063    10.3786     4.32815     5e-05       
201064    10.3786     4.32815     2.42075     
201065    10.3786     4.32815     4.5368      
201066    10.3786     4.32815     4.5368      
201067    10.3786     4.32815     4.5368      
201068    10.3786     4.32815     7.1966      
201069    10.3786     4.32815     9.3127      
201070    10.3786     4.32815     9.3127      
201071    10.3786     4.32815     9.3127      
201072    10.3786     4.32815     11.8969     
102073    10.3786     0.0         0.0         
102074    10.3786     0.0         2.4207      
102075    10.3786     0.0         2.4207      
102076    10.3786     0.0         2.4207      
102077    10.3786     0.0         4.5368      
102078    10.3786     0.0         7.1966      
102079    10.3786     0.0         7.1966      
102080    10.3786     0.0         7.1966      
102081    10.3786     0.0         9.3127      
102082    10.3786     0.0         11.8969     
102083    10.3786     0.0         11.8969     
102084    10.3786     0.0         11.8969     
202085    10.3786     2.8151      0.0         
202086    10.3786     2.8151      0.0         
202087    10.3786     2.8151      0.0         
202088    10.3786     2.8151      2.4207      
202089    10.3786     2.8151      4.5368      
202090    10.3786     2.8151      4.5368      
202091    10.3786     2.8151      4.5368      
202092    10.3786     2.8151      7.1966      
202093    10.3786     2.8151      9.3127      
202094    10.3786     2.8151      9.3127      
202095    10.3786     2.8151      9.3127      
202096    10.3786     2.8151      11.8969     
302097    10.3786     4.3282      4.5368      
302098    10.3786     4.3282      7.1966      
302099    10.3786     4.3282      7.1966      
3020100   10.3786     4.3282      7.1966      
4020101   10.3786     4.3282      0.0         
4020102   10.3786     4.3282      2.4207      
4020103   10.3786     4.3282      2.4207      
4020104   10.3786     4.3282      2.4207      
4020105   10.3786     4.3282      9.3127      
4020106   10.3786     4.3282      11.8969     
4020107   10.3786     4.3282      11.8969     
4020108   10.3786     4.3282      11.8969     
5020109   10.3786     5.5578      9.3127      
5020110   10.3786     5.5578      9.3127      
5020111   10.3786     5.5578      9.3127      
5020112   10.3786     5.5578      11.8969     
6020113   10.3786     5.704       4.5368      
6020114   10.3786     5.704       4.5368      
6020115   10.3786     5.704       4.5368      
6020116   10.3786     5.704       7.1966      
7020117   10.3786     5.8428      0.0         
7020118   10.3786     5.8428      0.0         
7020119   10.3786     5.8428      0.0         
7020120   10.3786     5.8428      2.4207      
#   }}}1
#
 element.connectivity
 elm.name       grp.name     nod.name
#   {{{
#
001       macro1      10001 10002 10003 200013 200014 200015 200016 10004
002       macro1      10005 10006 10007 200017 200018 200019 200020 10008
003       macro1      10009 100010 100011 200021 200022 200023 200024 100012
004       macro1      400033 400034 400035 700045 700046 700047 700048 400036
005       macro1      300025 300026 300027 600041 600042 600043 600044 300028
006       macro1      300029 300030 300031 500037 500038 500039 500040 300032
007       macro1      101049 101050 101051 201061 201064 201062 201063 101052
008       macro1      101053 101054 101055 201065 201068 201066 201067 101056
009       macro1      101057 101058 101059 201069 201072 201070 201071 101060
0010      macro1      4020101 4020102 4020103 7020117 7020120 7020118 7020119 4020104
0011      macro1      102073 102074 102075 202085 202088 202086 202087 102076
0012      macro1      102077 102078 102079 202089 202092 202090 202091 102080
0013      macro1      102081 102082 102083 202093 202096 202094 202095 102084
0014      macro1      302097 302098 302099 6020113 6020116 6020114 6020115 3020100
0015      macro1      4020105 4020106 4020107 5020109 5020112 5020110 5020111 4020108
#
# impose same vertical displacement on top nodes
101  cpy  6001004 6002001
102  cpy  6002001  6003001
103  cpy  6002001  6003001
#   }}}1
#
1000 g_forc_x &
  1000 6001004  6002001 6003001 6004001 

# Mass elements
  m1   m1  6001004 
  m2   m2  6002001
  m3   m2  6003001 
  m4   m1  6004001
  

 restraints
 nod.name      direction
 #   {{{1
10001     ry+rz     
10002     ry+rz     
10003     ry+rz     
200013    ry+rz     
200014    rx+ry     
200015    rx+ry     
200016    rx+ry     
10004     rx+ry     
10005     ry+rz     
10006     ry+rz     
10007     ry+rz     
200017    ry+rz     
200018    rx+ry     
200019    rx+ry     
200020    rx+ry     
10008     rx+ry     
10009     ry+rz     
100010    ry+rz     
100011    ry+rz     
200021    ry+rz     
200022    rx+ry     
200023    rx+ry     
200024    rx+ry     
100012    rx+ry     
400033    ry+rz     
400034    ry+rz     
400035    ry+rz     
700045    ry+rz     
700046    rx+ry     
700047    rx+ry     
700048    rx+ry     
400036    rx+ry     
300025    ry+rz     
300026    ry+rz     
300027    ry+rz     
600041    ry+rz     
600042    rx+ry     
600043    rx+ry     
600044    rx+ry     
300028    rx+ry     
300029    ry+rz     
300030    ry+rz     
300031    ry+rz     
500037    ry+rz     
500038    rx+ry     
500039    rx+ry     
500040    rx+ry     
300032    rx+ry     
101049    ry+rz     
101050    ry+rz     
101051    ry+rz     
201061    ry+rz     
201064    rx+ry     
201062    rx+ry     
201063    rx+ry     
101052    rx+ry     
101053    ry+rz     
101054    ry+rz     
101055    ry+rz     
201065    ry+rz     
201068    rx+ry     
201066    rx+ry     
201067    rx+ry     
101056    rx+ry     
101057    ry+rz     
101058    ry+rz     
101059    ry+rz     
201069    ry+rz     
201072    rx+ry     
201070    rx+ry     
201071    rx+ry     
101060    rx+ry     
4020101   ry+rz     
4020102   ry+rz     
4020103   ry+rz     
7020117   rx+ry     
7020120   ry+rz     
7020118   ry+rz     
7020119   ry+rz     
4020104   rx+ry     
102073    ry+rz     
102074    ry+rz     
102075    ry+rz     
202085    rx+ry     
202088    ry+rz     
202086    rx+ry     
202087    rx+ry     
102076    rx+ry     
102077    ry+rz     
102078    rx+ry     
102079    rx+ry     
202089    rx+ry     
202092    ry+rz     
202090    rx+ry     
202091    rx+ry     
102080    rx+ry     
102081    ry+rz     
102082    ry+rz     
102083    ry+rz     
202093    rx+ry     
202096    ry+rz     
202094    ry+rz     
202095    ry+rz     
102084    rx+ry     
302097    ry+rz     
302098    ry+rz     
302099    ry+rz     
6020113   rx+ry     
6020116   ry+rz     
6020114   rx+ry     
6020115   rx+ry     
3020100   rx+ry     
4020105   ry+rz     
4020106   rx+ry     
4020107   rx+ry     
5020109   rx+ry     
5020112   ry+rz     
5020110   rx+ry     
5020111   rx+ry     
4020108   rx+ry     
#   }}}1
#
linear.curves
#   {{{1
 start.time = 0
 crv.name = c1
 file = Short_panel.acc.dat    
 first.line = 2
 #last.line = 1200
 #format = (f8.6,3x,f9.6)
#   }}}1
#
 applied.loading
 dynamic.loads
 nod.name       direction        type        crv.name          value 
#   {{{1
1000    x            a    c1   1.0
#   }}}1
 initial.loads
elm.name  type value
f 10201   udl1   0.0 -1.80e-5 0.0
r     1    -     0.0 0.0 0.0  2
r   100    -     0.0 0.0 0.0  2

nod.name       direction        type          value 
#   {{{1
  6001004        y            f    -25000.00000
  6002001        y            f    -50000.00000
  #6002004        y            f    -25000.00000
  6003001        y            f    -50000.00000
  #6003004        y            f    -25000.00000
  6004001        y            f    -25000.00000
#   }}}1
1000    x           v  -0.000615451

#
 equilibrium.stages
   end.of.stage    steps
    4000    4000
#
 solution
  solver = mumps
#
#dynamic analysis parameters
 integration.scheme
 scheme = hilber.hughes.taylor
  alpha = -0.33
#
 iterative.strategy
   number = 60
   initial.reformations = 60
   step.reduction = 60
   divergence.iteration = 60
   maximum.convergence =  1e7
#
 convergence.criteria
   tolerance = 1.000000e-05
   work.ref = 1.000000e+06
#
 output
 frequency 10 stress
#
end
